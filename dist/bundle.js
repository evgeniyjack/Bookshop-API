(()=>{"use strict";const t=(t,e)=>{const s=JSON.parse(localStorage.getItem("basket")),r=document.querySelector(t),n=document.querySelectorAll(e);s&&s.length>0?(r.style.display="flex",r.textContent=s.length):r.style.display="none",n.forEach((t=>{const e=t.getAttribute("data-id");-1!==(s?s.findIndex((t=>t.id===e)):-1)?(t.classList.add("in-basket"),t.textContent="in the cart"):(t.classList.remove("in-basket"),t.textContent="buy now")}))},e=(e,s,r,n,i)=>{const a=document.createElement("div");i?i.setAttribute("disabled",""):(a.classList.add("loader"),a.innerHTML='<div class="lds-ring"><div></div><div></div><div></div><div></div></div>',document.querySelector(n).append(a)),(async(t,e,s)=>{const r=`https://www.googleapis.com/books/v1/volumes?q=subject:${t}&key=AIzaSyDcH4tKiz9Bqx8dWuyn5poNh9BqX1x4Llo&printType=books&startIndex=${e}&maxResults=${s}&langRestrict=en`;try{const t=await fetch(r),e=await t.json();return console.log(e),e.items.map((t=>{const e=t.volumeInfo,s=t.saleInfo;return{title:e.title||"No Title",writer:e.authors||[],image:e.imageLinks?e.imageLinks.thumbnail:"assets/img/book.png",about:e.description||"no info",score:e.ratingsCount||null,stars:e.averageRating||null,price:s&&s.retailPrice?s.retailPrice.amount:null,currency:s&&s.retailPrice?s.retailPrice.currencyCode:null,id:t.id}}))}catch(t){return console.error("Error:",t),[]}})(e,s,r).then((e=>{var s,r;e.forEach((t=>{new class{constructor(t){let{writer:e,title:s,score:r,stars:n,about:i,price:a,image:o,id:c,currency:l}=t;this.writer=e,this.title=s,this.score=r,this.stars=n,this.about=i,this.price=a,this.image=o,this.id=c,this.currency=l}render(t){const e=`\n            <div class="book-image"><img src="${this.image}" alt="book image"></div>\n            <div class="book-data">\n                <div class="writer">${(t=>{let e="";return t.forEach(((s,r)=>{r===t.length-1?e+=s:e+=s+", "})),e})(this.writer)}</div>\n                <div class="title">${this.title}</div>\n                <div class="score">\n                    ${this.stars?`<div class="stars-container">\n                        ${(t=>{let e="";for(let s=0;s<5;s++)e+=s<t?'<span class="yellow"><img src="assets/img/star.svg" alt="star icon"></span>':'<span><img src="assets/img/star.svg" alt="star icon"></span>';return e})(this.stars)}\n                    </div>`:""}\n                    ${this.score?`<span class="reviews">${this.score} review</span>`:""}\n                </div> \x3c!-- Закройте тег div правильно здесь --\x3e\n                <p>${this.about}</p>\n                ${this.price?`<div class="price">${this.currency} ${this.price}</div>`:""}\n                <button class="btn buy" data-id="${this.id}">buy now</button>\n            </div>\n        `,s=document.createElement("div");s.classList.add("item"),s.innerHTML=e,document.querySelector(t).append(s)}}(t).render(n)})),s=".btn.buy",r=".header-buttons .basket span",document.querySelectorAll(s).forEach((e=>{e.addEventListener("click",(()=>{const n=e.getAttribute("data-id");let i=JSON.parse(localStorage.getItem("basket"))||[];const a=i.findIndex((t=>t.id===n));-1!==a?i.splice(a,1):i.push({id:n}),localStorage.setItem("basket",JSON.stringify(i)),t(r,s)}))})),t("nav .header-buttons .basket span",".btn.buy"),a.remove(),i&&i.removeAttribute("disabled","")}))};document.addEventListener("DOMContentLoaded",(()=>{((t,e,s)=>{const r=document.querySelector(t),n=document.querySelectorAll(e),i=document.querySelector(s),a=n[0].clientWidth;let o=-1;const c=()=>{o=(o+1)%n.length;const t=-o*a;r.style.transform=`translateX(${t}px)`,Array.from(i.children).forEach(((t,e)=>{t.classList.toggle("active",e===o)}))};n.forEach((()=>(()=>{const t=document.createElement("button");return i.appendChild(t),t})())),i.addEventListener("click",(t=>{const e=t.target.closest("button");e&&(o=Array.from(i.children).indexOf(e)-1,c())})),c(),setInterval(c,5e3)})(".sliders__container",".sliders__container a",".slider .dots"),((t,s,r,n)=>{const i=document.querySelector(r);i.addEventListener("click",(()=>{const r=document.querySelector(t).getAttribute("data-param"),a=document.querySelector(s).children.length;console.log(a),console.log(r),e(r,a,a+n,s,i)}))})("aside ul li.active button",".card-container",".show-more",6),((t,s)=>{const r=document.querySelectorAll(t);e("Architecture",0,6,s),r.forEach((t=>{t.addEventListener("click",(()=>{const n=document.querySelector(s),i=t.getAttribute("data-param");r.forEach((t=>t.parentNode.classList.remove("active"))),t.parentNode.classList.add("active"),Array.from(n.children).forEach((t=>t.remove())),e(i,0,6,s)}))}))})("aside ul li button",".card-container")}))})();
//# sourceMappingURL=bundle.js.map